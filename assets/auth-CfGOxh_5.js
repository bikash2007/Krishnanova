import{r as i,R as j}from"./router-2ZaFt4IY.js";function B(o={}){const{nonce:e,onScriptLoadSuccess:t,onScriptLoadError:n}=o,[l,r]=i.useState(!1),u=i.useRef(t);u.current=t;const v=i.useRef(n);return v.current=n,i.useEffect(()=>{const c=document.createElement("script");return c.src="https://accounts.google.com/gsi/client",c.async=!0,c.defer=!0,c.nonce=e,c.onload=()=>{var d;r(!0),(d=u.current)===null||d===void 0||d.call(u)},c.onerror=()=>{var d;r(!1),(d=v.current)===null||d===void 0||d.call(v)},document.body.appendChild(c),()=>{document.body.removeChild(c)}},[e]),l}const O=i.createContext(null);function F({clientId:o,nonce:e,onScriptLoadSuccess:t,onScriptLoadError:n,children:l}){const r=B({nonce:e,onScriptLoadSuccess:t,onScriptLoadError:n}),u=i.useMemo(()=>({clientId:o,scriptLoadedSuccessfully:r}),[o,r]);return j.createElement(O.Provider,{value:u},l)}function H(){const o=i.useContext(O);if(!o)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return o}function J(o){var e;return(e=o?.clientId)!==null&&e!==void 0?e:o?.client_id}const N={large:40,medium:32,small:20};function K({onSuccess:o,onError:e,useOneTap:t,promptMomentNotification:n,type:l="standard",theme:r="outline",size:u="large",text:v,shape:c,logo_alignment:d,width:L,locale:k,click_listener:U,containerProps:g,...D}){const x=i.useRef(null),{clientId:G,scriptLoadedSuccessfully:A}=H(),R=i.useRef(o);R.current=o;const h=i.useRef(e);h.current=e;const $=i.useRef(n);return $.current=n,i.useEffect(()=>{var p,m,_,b,y,S,E,I,C;if(A)return(_=(m=(p=window?.google)===null||p===void 0?void 0:p.accounts)===null||m===void 0?void 0:m.id)===null||_===void 0||_.initialize({client_id:G,callback:a=>{var s;if(!a?.credential)return(s=h.current)===null||s===void 0?void 0:s.call(h);const{credential:f,select_by:M}=a;R.current({credential:f,clientId:J(a),select_by:M})},...D}),(S=(y=(b=window?.google)===null||b===void 0?void 0:b.accounts)===null||y===void 0?void 0:y.id)===null||S===void 0||S.renderButton(x.current,{type:l,theme:r,size:u,text:v,shape:c,logo_alignment:d,width:L,locale:k,click_listener:U}),t&&((C=(I=(E=window?.google)===null||E===void 0?void 0:E.accounts)===null||I===void 0?void 0:I.id)===null||C===void 0||C.prompt($.current)),()=>{var a,s,f;t&&((f=(s=(a=window?.google)===null||a===void 0?void 0:a.accounts)===null||s===void 0?void 0:s.id)===null||f===void 0||f.cancel())}},[G,A,t,l,r,u,v,c,d,L,k]),j.createElement("div",{...g,ref:x,style:{height:N[u],...g?.style}})}class w extends Error{}w.prototype.name="InvalidTokenError";function T(o){return decodeURIComponent(atob(o).replace(/(.)/g,(e,t)=>{let n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function V(o){let e=o.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return T(e)}catch{return atob(e)}}function P(o,e){if(typeof o!="string")throw new w("Invalid token specified: must be a string");e||(e={});const t=e.header===!0?0:1,n=o.split(".")[t];if(typeof n!="string")throw new w(`Invalid token specified: missing part #${t+1}`);let l;try{l=V(n)}catch(r){throw new w(`Invalid token specified: invalid base64 for part #${t+1} (${r.message})`)}try{return JSON.parse(l)}catch(r){throw new w(`Invalid token specified: invalid json for part #${t+1} (${r.message})`)}}export{K as G,F as a,P as j};
